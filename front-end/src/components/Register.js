import React, { Component } from 'react';
import {Link, Redirect, useHistory} from 'react-router-dom';
import backendApi from '../apis/BackendApi';
import axios from 'axios';
class Register extends Component {

    state = {
        firstName: "",
        lastName: "",
        email: "",
        username: "",
        password: ""
    }

    constructor(){
        super();
    }

    handleSubmit = (event) => {
        event.preventDefault();
        const data = this.state;
        backendApi.post('/user/register', data)
            .then(response => {
                alert("Registration successfull");
                window.location = "http://localhost:3000"
            })
            .catch(error => {
                alert(error)
            })
    }

    handleInputChange = (event) => {
        this.setState({
            [event.target.name]: event.target.value
        })
    }

    render(){

        return(
            <div class="wrapper" style={{background: "#2C54C6",
                                        height: "100%",
                                        width:"100%"}}>

                    <div class="row justify-content-center">
                        <div class="col-md-5">
                        <div class="card o-hidden border-0 shadow-lg my-5">
                            <div class="card-body p-0">
                                        <div class="p-5">
                                            <div class="text-center">
                                                <h1 class="h4 text-gray-900 mb-4">Create an Account!</h1>
                                            </div>
                                            <form class="user" onSubmit={this.handleSubmit}>
                                                <div class="form-group row">
                                                <div class="col-sm-6 mb-3 mb-sm-0">
                                                    <input type="text" onChange={this.handleInputChange} name="firstName" class="form-control form-control-user" placeholder="First Name"/>
                                                </div>
                                                <div class="col-sm-6">
                                                    <input type="text" onChange={this.handleInputChange} name="lastName" class="form-control form-control-user" placeholder="Last Name"/>
                                                </div>
                                                </div>
                                                <div class="form-group">
                                                <input type="email" onChange={this.handleInputChange} name="email" class="form-control form-control-user" placeholder="Email Address"/>
                                                </div>
                                                <div class="form-group row">
                                                <div class="col-sm-6 mb-3 mb-sm-0">
                                                    <input type="text" onChange={this.handleInputChange} name="username" class="form-control form-control-user" placeholder="Username"/>
                                                </div>
                                                <div class="col-sm-6">
                                                    <input type="password" onChange={this.handleInputChange} name="password" class="form-control form-control-user" placeholder="Password"/>
                                                </div>
                                                </div>
                                                <button type="submit" class="btn btn-primary btn-user btn-block">
                                                    Register Account
                                                </button>
                                                <hr/>
                                            </form>
                                            <hr />
                                            <div class="text-center">
                                                <Link to="/login">
                                                    <a class="small">Already have an account? Login!</a>
                                                </Link>
                                            </div>
                                            </div>
                                                </div>
                                        </div>
                                    </div>
                    </div>
            </div>


        )


    }


}

export default Register