import React, { Component } from 'react';
import {Link} from 'react-router-dom';
import { Formik, Field, Form, ErrorMessage } from 'formik';
import * as Yup from 'yup';
import userService from '../service/UserService';

class Register extends Component {

    state = {
    }

    handleSubmit = (fields) => {
        const data = {
            firstName: fields.firstName,
            lastName: fields.lastName,
            email: fields.email,
            username: fields.username,
            password: fields.password
        }
        userService.register(data);
    }

    render(){

        return(
            <div className={"wrapper"} style={{background: "#2C54C6",
                                        height: "100%",
                                        width:"100%"}}>

                    <div className={"row justify-content-center"}>
                        <div className={"col-md-5"}>
                        <div className={"card o-hidden border-0 shadow-lg my-5"}>
                            <div className={"card-body p-0"}>
                                        <div className={"p-5"}>
                                            <div className={"text-center"}>
                                                    <h1 className={"h4 text-gray-900 mb-4"}>Create an Account!</h1>
                                            </div>
                                            
                                            <Formik
                                                initialValues={{
                                                    firstName: '',
                                                    lastName: '',
                                                    email: '',
                                                    username: '',
                                                    password: '',
                                                }}
                                                validationSchema={Yup.object().shape({
                                                    firstName: Yup.string()
                                                        .required('First Name is required'),
                                                    lastName: Yup.string()
                                                        .required('Last Name is required'),
                                                    email: Yup.string()
                                                        .email('Email is invalid')  
                                                        .required('Email is required'),
                                                    username: Yup.string()
                                                        .required('Username is required'),
                                                    password: Yup.string()
                                                        .required('Password is required'),
                                                })}
                                                onSubmit={fields => this.handleSubmit(fields)}
                                                render={({ errors, status, touched }) => (
                                                    <Form>
                                                                <div className={"form-group row"}>
                                                                <div className={"col-sm-6 mb-3 mb-sm-0"}>
                                                                    <Field type="text"
                                                                        name="firstName"
                                                                        className={'form-control form-control-user' + (errors.firstName && touched.firstName ? ' is-invalid' : '')}
                                                                        placeholder="First Name"/>
                                                                     <ErrorMessage name="firstName" component="div" className="invalid-feedback" />
                                                                </div>

                                                                <div className="col-sm-6">
                                                                    <Field type="text"
                                                                        name="lastName"
                                                                        className={'form-control form-control-user' + (errors.lastName && touched.lastName ? ' is-invalid' : '')}
                                                                        placeholder="Last Name"/>
                                                                     <ErrorMessage name="lastName" component="div" className="invalid-feedback" />
                                                                </div>
                                                                </div>
                                                                
                                                                <div className="form-group">
                                                                    <Field type="text"
                                                                        name="email"
                                                                        className={'form-control form-control-user' + (errors.email && touched.email ? ' is-invalid' : '')}
                                                                        placeholder="Email Address"/>
                                                                    <ErrorMessage name="email" component="div" className="invalid-feedback" />
                                                                </div>
                                                                
                                                                <div className="form-group row">
                                                                <div className="col-sm-6 mb-3 mb-sm-0">
                                                                    <Field type="text"
                                                                        name="username"
                                                                        className={'form-control form-control-user' + (errors.username && touched.username ? ' is-invalid' : '')}
                                                                        placeholder="Username"/>
                                                                     <ErrorMessage name="username" component="div" className="invalid-feedback" />
                                                                </div>
                                                                
                                                                <div className="col-sm-6">
                                                                    <Field type="password"
                                                                        name="password"
                                                                        className={'form-control form-control-user' + (errors.password && touched.password ? ' is-invalid' : '')}
                                                                        placeholder="Password"/>
                                                                     <ErrorMessage name="password" component="div" className="invalid-feedback" />
                                                                </div>
                                                                </div>
                                                                
                                                                <button type="submit" className="btn btn-primary btn-user btn-block">
                                                                    Register Account
                                                                </button>
                                                                <hr/>
                                                    </Form>
                                                )}
                                            />
                                            <hr />
                                            <div className={"text-center"}>
                                                <Link to="/login">
                                                    <div className={"small"}>Already have an account? Login!</div>
                                                </Link>
                                            </div>
                                            </div>
                                                </div>
                                        </div>
                                    </div>
                    </div>
            </div>


        )


    }


}

export default Register