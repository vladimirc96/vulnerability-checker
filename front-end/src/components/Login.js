import React, {Component} from 'react';
import {Link} from 'react-router-dom';
import { Formik, Field, Form, ErrorMessage } from 'formik';
import * as Yup from 'yup';
import authServce from '../service/AuthService';

class Login extends Component{

    handleSubmit = (fields) => {
        authServce.login(fields.username, fields.password);
    }

    render(){

        return(
            <div className="wrapper" style={{background: "#2C54C6",
                                            height: "100%",
                                            width:"100%"}}>

                <div className="row justify-content-center">
            
                    <div className="col-md-5">
                        <div className="card o-hidden border-0 shadow-lg my-5">
                            <div className="card-body p-0">
                                        <div className="p-5">
                                            <div className="text-center">
                                                <h1 className="h4 text-gray-900 mb-4">Welcome Back!</h1>
                                            </div>
                                            <Formik 
                                                initialValues={{
                                                    username: '',
                                                    password: '',
                                                }}
                                                validationSchema={Yup.object().shape({
                                                    username: Yup.string()
                                                        .required('Username is required'),
                                                    password: Yup.string()
                                                        .required('Password is required'),
                                                })}
                                                onSubmit={fields => this.handleSubmit(fields)}
                                                render={ ({ errors, status, touched}) => (
                                                    <Form>
                                                        <div className="form-group">
                                                            <Field 
                                                                name="username"
                                                                type="text"
                                                                className={'form-control form-control-user' + (errors.username && touched.username ? ' is-invalid' : '')}
                                                                placeholder="Enter username..."/>
                                                                <ErrorMessage name="username" component="div" className="invalid-feedback" />
                                                        </div>
                                                        <div className="form-group">
                                                            <Field type="password"
                                                                    name="password"
                                                                    className={'form-control form-control-user' + (errors.password && touched.password ? ' is-invalid' : '')}
                                                                    placeholder="Enter password..."/>
                                                            <ErrorMessage name="password" component="div" className="invalid-feedback" />
                                                        </div>
                                                            
                                                        <button type="submit" className="btn btn-primary btn-user btn-block">
                                                            Login
                                                        </button>
                                                    </Form>
                                                ) }
                                            />
                                            {/* <div className="text-center">
                                                <Link to="/register">
                                                    <div className="small">Create an Account!</div>
                                                </Link>
                                            </div> */}
                                        </div>
                            </div>
                        </div>
                    </div>
                </div>
          </div>
        )


    }


}

export default Login