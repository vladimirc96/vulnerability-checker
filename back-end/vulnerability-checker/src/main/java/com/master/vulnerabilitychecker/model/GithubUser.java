package com.master.vulnerabilitychecker.model;

import com.master.vulnerabilitychecker.dto.GithubUserDTO;
import org.springframework.boot.autoconfigure.info.ProjectInfoProperties;

import javax.persistence.*;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

@Entity
@DiscriminatorValue("GITHUBUSER")
public class GithubUser extends User {

    @Column(name = "access_token")
    private String accessToken;

    @ManyToMany(mappedBy = "users", cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    private List<Repository> repositories = new ArrayList<>();

    public GithubUser(){
        super();
    }

    public GithubUser(String username, String password, String firstName, String lastName, String email, String accessToken) {
        super(username, password, firstName, lastName, email);
        this.accessToken = accessToken;
    }

    public GithubUser(GithubUserDTO githubUserDTO){
       this(githubUserDTO.getUsername(), githubUserDTO.getPassword(),githubUserDTO.getFirstName(), githubUserDTO.getLastName(), githubUserDTO.getEmail(), githubUserDTO.getAccessToken());
    }

    public String getAccessToken() {
        return accessToken;
    }

    public void setAccessToken(String accessToken) {
        this.accessToken = accessToken;
    }

    public List<Repository> getRepositories() {
        return repositories;
    }

    public void setRepositories(List<Repository> repositories) {
        this.repositories = repositories;
    }
}
